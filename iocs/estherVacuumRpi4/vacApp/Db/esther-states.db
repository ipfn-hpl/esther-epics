# vim: sta:et:sw=4:ts=4:sts=4
#
# Project       : ESTHER Vacuum slow Control
#
# File          : 
# Description   : Records for  Control
#
##
# Author        : Bernardo Carvalho (IPFN-IST)
#
# Copyright (c) : (IPFN-IST)
# Created 26-May-2022
#
##
#record(ai, "$(P)aiExample") {
#    field(DESC, "temp ai PV")
#}
record(mbbo, "$(P)$(R)OPSTATE") {
    field(DESC, "Multiple Shot Sequence State")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(FVVL, "5")
    field(SXVL, "6")
    field(SVVL, "7")
    field(EIVL, "8")
    field(NIVL, "9")
    field(ZRST, "Stopped")
    field(ONST, "Idle")
    field(TWST, "ManualOperation")
    field(THST, "StartingLowVacuum")
    field(FRST, "LowVacuum")
    field(FVST, "StoppingLowVacuum")
    field(SXST, "StartingHighVacuum")
    field(SVST, "HighVacuum")
    field(EIST, "StoppingHighVacuum")
    field(NIST, "Emergency")
    field(FLNK, "$(P)$(R)OPCALCSTATE")
    field(VAL, "0")
    #info(autosaveFields, "VAL")
    field(PINI, "YES")
}
record(mbbo, "$(P)$(R)LAST-OPSTATE") {
    field(DESC, "Multiple Shot Sequence State")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(FVVL, "5")
    field(SXVL, "6")
    field(SVVL, "7")
    field(EIVL, "8")
    field(ZRST, "Idle")
    field(ONST, "Stopped")
    field(TWST, "Starting")
    field(THST, "LowVacuum")
    field(FRST, "StartMaglev")
    field(FVST, "StopMaglev")
    field(SXST, "HighVAcuum")
    field(SVST, "Emergency")
    field(EIST, "UPSEmergency")
    info(autosaveFields, "VAL")
}

# record for bit leds
record(calc, "$(P)$(R)OPCALCSTATE") {
    field(DESC, "Pulse Calculated State")
    field(CALC,"2^A")
    #field(SCAN,"1 second")
    field(INPA,"$(P)$(R)OPSTATE.VAL NPP NMS")
}

record(bo, "$(P)$(R)START-REQ") {
    # info(autosaveFields, "VAL")
    field(DESC, "Pulse Sequence Start/Continue")
    field(VAL, "0")
    field(PINI, "YES")
    field(ZNAM, "Push to Start")
    field(ONAM, "START")
}
record(bo, "$(P)$(R)STOP-REQ") {
    info(autosaveFields, "VAL")
    field(DESC, "Pulse Sequence Stop")
    field(VAL, "0")
    field(PINI, "YES")
    field(ZNAM, "Push to Stop")
    field(ONAM, "STOP")
}
record(calc, "$(P)$(R)COUNTUP") {
    field(DESC, "Counter Increment")
    field(INPA,"$(P)$(R)COUNTUP")
    field(DISA,"1")
    field(SCAN,"1 second")
    field(CALC,"A+1")
    field(VAL, "160")
}

record(stringout, "$(P)$(R)TraceMessage") {
    info(autosaveFields, "VAL")
    field(DESC, "Trace Message from IOC")
    field(VAL, "Trace mode ON")
}
